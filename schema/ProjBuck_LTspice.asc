Version 4
SHEET 1 2976 1144
WIRE -1600 80 -1696 80
WIRE -1552 80 -1600 80
WIRE -2464 96 -2560 96
WIRE -2416 96 -2464 96
WIRE -2336 96 -2416 96
WIRE -1600 96 -1600 80
WIRE -640 96 -672 96
WIRE -2464 112 -2464 96
WIRE -1888 112 -1888 96
WIRE -640 112 -640 96
WIRE -2416 128 -2416 96
WIRE -448 128 -480 128
WIRE -336 128 -368 128
WIRE -1456 144 -1456 96
WIRE -1296 144 -1456 144
WIRE -1152 144 -1200 144
WIRE -1104 144 -1152 144
WIRE -992 144 -1024 144
WIRE -896 144 -992 144
WIRE -864 144 -896 144
WIRE -16 144 -112 144
WIRE 192 144 48 144
WIRE -1696 160 -1696 80
WIRE -2560 176 -2560 96
WIRE -1456 176 -1456 144
WIRE -896 176 -896 144
WIRE -1600 192 -1600 176
WIRE -1552 192 -1600 192
WIRE -1152 192 -1152 144
WIRE -992 192 -992 144
WIRE -2464 208 -2464 192
WIRE -2416 208 -2416 192
WIRE -2416 208 -2464 208
WIRE -2256 208 -2416 208
WIRE -2144 208 -2176 208
WIRE -1888 208 -1888 192
WIRE -1840 208 -1888 208
WIRE -1600 208 -1600 192
WIRE -640 208 -640 192
WIRE -592 208 -640 208
WIRE -480 208 -480 128
WIRE -480 208 -512 208
WIRE -2048 224 -2080 224
WIRE -1888 224 -1888 208
WIRE -1280 224 -1280 192
WIRE -640 224 -640 208
WIRE -480 224 -480 208
WIRE -464 224 -480 224
WIRE -2464 240 -2464 208
WIRE -2256 240 -2304 240
WIRE -2144 240 -2176 240
WIRE -320 240 -400 240
WIRE -224 240 -224 208
WIRE -224 240 -320 240
WIRE -208 240 -224 240
WIRE -112 240 -112 144
WIRE -112 240 -128 240
WIRE -96 240 -112 240
WIRE 0 240 -16 240
WIRE 64 240 0 240
WIRE -2416 256 -2416 208
WIRE -2304 256 -2304 240
WIRE -464 256 -480 256
WIRE 192 256 192 144
WIRE 192 256 128 256
WIRE 224 256 192 256
WIRE -2048 272 -2048 224
WIRE -2032 272 -2048 272
WIRE 0 272 0 240
WIRE 64 272 48 272
WIRE -1696 304 -1696 240
WIRE -1600 304 -1600 288
WIRE -1600 304 -1696 304
WIRE -1456 304 -1456 256
WIRE -1456 304 -1600 304
WIRE -1152 304 -1152 256
WIRE -1152 304 -1456 304
WIRE -992 304 -992 256
WIRE -992 304 -1152 304
WIRE -896 304 -896 256
WIRE -896 304 -992 304
WIRE -864 304 -896 304
WIRE -640 320 -640 304
WIRE -640 320 -672 320
WIRE -592 320 -640 320
WIRE -480 320 -480 256
WIRE -480 320 -512 320
WIRE -432 320 -480 320
WIRE -320 320 -320 240
WIRE -320 320 -352 320
WIRE -1696 336 -1696 304
WIRE 48 336 48 272
WIRE 192 336 192 256
WIRE 192 336 48 336
WIRE -2560 352 -2560 256
WIRE -2464 352 -2464 320
WIRE -2464 352 -2560 352
WIRE -2416 352 -2416 320
WIRE -2416 352 -2464 352
WIRE -2304 352 -2304 336
WIRE -2304 352 -2416 352
WIRE -1888 352 -1888 320
WIRE -1888 352 -2304 352
WIRE -1856 352 -1888 352
WIRE 0 352 0 336
FLAG -336 128 0
FLAG -1552 80 Vcc
FLAG -432 272 Vcc
FLAG 0 352 0
FLAG 96 288 Vcc
FLAG -1696 336 0
FLAG 224 256 V_in_ADC
FLAG -672 96 out
FLAG -432 208 0
FLAG 96 224 0
FLAG -672 320 low
FLAG -864 144 out
FLAG -864 304 low
FLAG -224 208 V_transd
FLAG -1456 96 Vs
FLAG -1840 208 PWM
FLAG -1280 224 PWM
FLAG -1856 352 low
FLAG -1888 96 Vs
FLAG -2112 192 low
FLAG -2336 96 ref
FLAG -2112 256 Vcc
FLAG -1552 192 2v5
SYMBOL res -656 96 R0
WINDOW 3 36 61 Left 2
SYMATTR Value 9.4k
SYMATTR InstName R1
SYMBOL res -656 208 R0
WINDOW 0 36 43 Left 2
WINDOW 3 36 66 Left 2
SYMATTR InstName R2
SYMATTR Value 1.5k
SYMBOL voltage -2560 160 R0
WINDOW 123 -85 126 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 173 -489 Invisible 2
WINDOW 0 -52 39 VRight 2
SYMATTR Value PULSE(6 18 9m 1m 1m 9ms 20ms)
SYMATTR InstName V_ref
SYMBOL res -496 336 M270
WINDOW 0 -25 56 VTop 2
WINDOW 3 -26 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -496 224 M270
WINDOW 0 55 57 VTop 2
WINDOW 3 56 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -448 304 M90
WINDOW 0 59 54 VBottom 2
WINDOW 3 59 53 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 -432 304 M180
WINDOW 0 45 96 Left 2
WINDOW 3 26 117 Left 2
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL res -464 112 M90
WINDOW 0 -25 52 VBottom 2
WINDOW 3 -25 54 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL voltage -1696 144 R0
WINDOW 0 39 38 Left 2
WINDOW 3 42 57 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res -112 224 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 62 57 VTop 2
SYMATTR InstName R7
SYMATTR Value 27k
SYMBOL res 0 224 R90
WINDOW 0 -38 58 VBottom 2
WINDOW 3 -27 55 VTop 2
SYMATTR InstName R8
SYMATTR Value 16k
SYMBOL cap -16 272 R0
WINDOW 0 -16 15 Left 2
WINDOW 3 -74 53 Left 2
SYMATTR InstName C1
SYMATTR Value 1.5n
SYMBOL OpAmps\\opamp2 96 320 M180
WINDOW 0 44 77 Left 2
WINDOW 3 25 50 Left 2
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL cap 48 128 R90
WINDOW 0 -32 34 VBottom 2
WINDOW 3 -29 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL ind -1120 160 R270
WINDOW 0 37 62 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L
SYMATTR Value 2m
SYMBOL diode -1136 256 R180
WINDOW 0 -6 57 Left 2
WINDOW 3 -70 3 Left 2
SYMATTR InstName D
SYMATTR Value 1N4148
SYMBOL cap -1008 192 R0
SYMATTR InstName C
SYMATTR Value 16.4µ
SYMBOL res -912 160 R0
WINDOW 0 44 33 Left 2
WINDOW 3 45 80 Left 2
SYMATTR InstName R
SYMATTR Value 12
SYMBOL voltage -1456 160 R0
WINDOW 0 39 38 Left 2
WINDOW 3 42 57 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 42 77 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL pmos -1200 192 M270
WINDOW 0 83 57 VLeft 2
WINDOW 3 64 87 VLeft 2
SYMATTR InstName M1
SYMATTR Value IRF9Z24S_L
SYMBOL OpAmps\\opamp2 -2112 288 M180
WINDOW 0 45 96 Left 2
WINDOW 3 26 117 Left 2
SYMATTR InstName U3
SYMATTR Value OPA340
SYMBOL voltage -2304 240 R0
WINDOW 123 -85 126 Left 2
WINDOW 3 173 -489 Invisible 2
WINDOW 0 -48 39 VRight 2
SYMATTR Value PULSE(0 5 0 33.3u 33.3u 0 66.7u)
SYMATTR InstName V_tri
SYMATTR SpiceLine Rser=1k
SYMBOL res -1904 96 R0
SYMATTR InstName R9
SYMATTR Value 500
SYMBOL npn -1952 224 R0
SYMATTR InstName Q1
SYMBOL res -1936 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 2k
SYMBOL res -2448 336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res -2448 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 19k
SYMBOL cap -2432 256 R0
SYMATTR InstName C3
SYMATTR Value 68p
SYMBOL cap -2432 128 R0
SYMATTR InstName C4
SYMATTR Value 20p
SYMBOL res -1616 80 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -1616 192 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res -2160 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -37 57 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res -2272 256 R270
WINDOW 0 -39 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 10k
TEXT -1632 440 Left 2 !.lib SpiceModel_LM358.mod
TEXT -1632 416 Left 2 !.tran 0 24m 0 100n
TEXT -56 24 Left 2 ;Filtro Sallen-Key
TEXT -568 32 Left 2 ;Transdutor
TEXT -1104 24 Left 2 ;Conversor Buck
TEXT -1624 24 Left 2 ;Fontes de Tensão
TEXT -1632 464 Left 2 !.lib SpiceModel_OPA340.mod
TEXT -2240 24 Left 2 ;Gerador de PWM
RECTANGLE Normal -1360 384 -1744 48 2
RECTANGLE Normal -784 384 -1328 48 2
RECTANGLE Normal 320 400 -256 48 2
RECTANGLE Normal -752 400 -288 48 2
RECTANGLE Normal -1776 384 -2640 48 2
